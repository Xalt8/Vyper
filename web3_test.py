from web3 import Web3
import json

ganache_url = "http://127.0.0.1:7545"

web3 = Web3(Web3.HTTPProvider(ganache_url))

web3.isConnected()

web3.eth.defaultAccount = web3.eth.accounts[0]

abi = json.loads('[{"stateMutability": "nonpayable", "type": "constructor", "inputs": [], "outputs": []}, {"stateMutability": "view", "type": "function", "name": "greet", "inputs": [], "outputs": [{"name": "", "type": "string"}], "gas": 17244}]')
bytecode = '0x600b610140527f48656c6c6f20576f726c640000000000000000000000000000000000000000006101605261014080600060c052602060c020602082510161012060006002818352015b8261012051602002111561005c5761007e565b61012051602002850151610120518501555b8151600101808352811415610049575b50505050505061015756600436101561000d576100c8565b600035601c52600051341561002157600080fd5b63cfae32178114156100c65760008060c052602060c020610180602082540161012060006005818352015b8261012051602002111561005f57610081565b61012051850154610120516020028501525b815160010180835281141561004c575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f35b505b60006000fd5b61008961015703610089600039610089610157036000f3'

Hello = web3.eth.contract(abi=abi, bytecode=bytecode)

tx_hash = Hello.constructor().transact()

tx_receipt = web3.eth.waitForTransactionReceipt(tx_hash)

contract = web3.eth.contract(address=tx_receipt.contractAddress, abi=abi)

